<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Checkout — Saffron Stitch</title>
    <meta name="description" content="Checkout at Saffron Stitch." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="./styles.css" />
    <link rel="icon" type="image/jpeg" href="favicon.jpeg">

    <style>
      body{background:
        radial-gradient(1000px 500px at 0% -10%, rgba(255,143,31,0.12), transparent 60%),
        radial-gradient(1000px 400px at 120% 10%, rgba(255,143,31,0.1), transparent 60%), #ffffff}
      .stripe{position:fixed; inset:0; background: repeating-linear-gradient(45deg, rgba(255,143,31,0.06) 0, rgba(255,143,31,0.06) 10px, transparent 10px, transparent 20px); opacity:.7; pointer-events:none; animation: drift 18s linear infinite}
      @keyframes drift{0%{transform:translateX(0)}100%{transform:translateX(-40px)}}
      .wrap{max-width:1100px;margin:0 auto;padding:28px 20px}
      .title{font-size:clamp(28px,6vw,44px);line-height:1.05;margin:6px 0 8px}
      .grid{display:grid;grid-template-columns: 1fr; gap:16px}
      @media(min-width: 900px){ .grid{grid-template-columns: 1fr 1fr} }
      .card{background:#fff;border:1px solid rgba(0,0,0,0.06);border-radius:14px;box-shadow:var(--shadow);padding:16px}
      .summary-item{display:flex;justify-content:space-between;margin-bottom:6px}
      .muted{color:var(--muted)}
      .field{display:grid;gap:6px;margin-bottom:10px}
      input, textarea{width:100%; padding:12px; border-radius:12px; border:1px solid rgba(0,0,0,0.12)}
      .submit{display:inline-flex;align-items:center;justify-content:center;padding:12px 14px;border-radius:12px;background:linear-gradient(180deg, var(--saffron), var(--saffron-strong));color:#fff;font-weight:700;border:none;cursor:pointer}
    </style>
  </head>
  <body>
    <div class="stripe" aria-hidden="true"></div>
    <header class="site-header">
      <div class="brand">
        <img class="brand-logo" src="./images/logo.jpeg" alt="Saffron Stitch logo" width="32" height="32" />
        <a href="index.html#top" class="brand-name">Saffron Stitch</a>
      </div>
      <nav class="site-nav" aria-label="Primary">
        <a href="about.html" class="nav-link">About Us</a>
        <a href="contact.html" class="nav-link">Contact Us</a>
        <a href="developer.html" class="nav-link">About Developer</a>
        <a href="cart.html" class="nav-link" id="nav-cart-link">
          <span class="icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 12.39a2 2 0 0 0 2 1.61h7.72a2 2 0 0 0 2-1.61L21 6H6"></path></svg>
          </span>
          Cart (0)
        </a>
      </nav>
      <button class="menu-toggle" aria-label="Open menu" aria-controls="mobile-drawer" aria-expanded="false"><span></span><span></span><span></span></button>
    </header>

    <main class="wrap">
      <h1 class="gradient-text title">Checkout</h1>
      <div class="grid">
        <section class="card">
          <h3>Order Summary</h3>
          <div id="summary"></div>
          <p class="muted" id="total">Total: ₹0</p>
        </section>
        <section class="card">
          <h3>Shipping Details</h3>
          <form action="https://formsubmit.co/saffronstitch05@gmail.com" method="POST" id="checkout-form">
            <input type="hidden" name="_subject" value="New order from Saffron Stitch" />
            <input type="hidden" name="_captcha" value="false" />
            <input type="hidden" name="order_json" id="order_json" />
            <div class="field">
              <label for="name">Full Name</label>
              <input id="name" name="name" type="text" placeholder="Your full name" required />
            </div>
            <div class="field">
              <label for="email">Email</label>
              <input id="email" name="email" type="email" placeholder="you@example.com" required />
            </div>
            <div class="field">
              <label for="mobile">Mobile No</label>
              <input id="mobile" name="mobile" type="tel" placeholder="+91‑XXXXXXXXXX" pattern="[+0-9\-\s]{7,20}" required />
            </div>
            <div class="field">
              <label for="address">Address</label>
              <textarea id="address" name="address" placeholder="House no, street, area" required></textarea>
            </div>
            <div class="field">
              <label for="pincode">Pincode</label>
              <input id="pincode" name="pincode" type="text" placeholder="6-digit pincode" pattern="[0-9]{6}" required />
            </div>
            <div class="field">
              <label for="location">Proper Location</label>
              <input id="location" name="location" type="text" placeholder="City, State" required />
            </div>
            <button class="submit" type="submit">Place Order</button>
 
          </form>
        </section>
      </div>
    </main>

    <footer class="site-footer">
      <p>© <span id="year"></span> Saffron Stitch • Made in India</p>
    </footer>

    <div class="mobile-overlay" hidden></div>
    <aside id="mobile-drawer" class="mobile-drawer" aria-hidden="true">
      <nav class="mobile-nav" aria-label="Mobile">
        <a class="mobile-link" href="index.html">Home</a>
        <a class="mobile-link" href="about.html">About</a>
        <a class="mobile-link" href="contact.html">Contact</a>
        <a class="mobile-link" href="developer.html">Developer</a>
        <a class="mobile-link" href="cart.html">Cart</a>
      </nav>
    </aside>

    <script>
      document.getElementById('year').textContent = new Date().getFullYear();
      // Drawer toggle
      const menuBtn = document.querySelector('.menu-toggle');
      const drawer = document.getElementById('mobile-drawer');
      const overlayNav = document.querySelector('.mobile-overlay');
      function openDrawer(){ drawer.classList.add('open'); overlayNav.hidden=false; document.body.classList.add('nav-open'); menuBtn.setAttribute('aria-expanded','true'); drawer.setAttribute('aria-hidden','false'); }
      function closeDrawer(){ drawer.classList.remove('open'); overlayNav.hidden=true; document.body.classList.remove('nav-open'); menuBtn.setAttribute('aria-expanded','false'); drawer.setAttribute('aria-hidden','true'); }
      if(menuBtn && drawer && overlayNav){
        menuBtn.addEventListener('click', ()=> drawer.classList.contains('open')? closeDrawer(): openDrawer());
        overlayNav.addEventListener('click', closeDrawer);
        drawer.querySelectorAll('a').forEach(a=>a.addEventListener('click', closeDrawer));
        window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeDrawer() });
      }

      // Cart helpers
      function getCart(){ return JSON.parse(localStorage.getItem('cart')||'[]') }
      function updateCartCount(){ const link=document.getElementById('nav-cart-link'); if(!link) return; const c=getCart(); link.lastChild.nodeValue = ` Cart (${c.length})`; }
      updateCartCount();

      // Render summary and prepare hidden order JSON
      const summaryEl = document.getElementById('summary');
      const totalEl = document.getElementById('total');
      const hiddenOrder = document.getElementById('order_json');
      const selected = JSON.parse(localStorage.getItem('checkoutSelection')||'null');
      const cart = Array.isArray(selected) && selected.length ? selected : getCart();
      let subtotal = 0;
      if(cart.length===0){ summaryEl.innerHTML = '<p class="muted">Your cart is empty.</p>'; }
      else {
        summaryEl.innerHTML = '';
        cart.forEach(item=>{
          subtotal += item.price * item.qty;
          const row = document.createElement('div'); row.className='summary-item';
          row.innerHTML = `<span>${item.title} — ${item.version} × ${item.qty}</span><span>₹${item.price*item.qty}</span>`;
          summaryEl.appendChild(row);
        });
      }
      totalEl.textContent = `Total: ₹${subtotal}`;
      hiddenOrder.value = JSON.stringify({
        items: cart.map(({id,title,version,qty,price})=>({id,title,version,qty,price})),
        subtotal
      });
      // Clear the one-time selection after using it
      if (Array.isArray(selected) && selected.length) {
        localStorage.removeItem('checkoutSelection');
      }
    </script>
  </body>

</html> 
